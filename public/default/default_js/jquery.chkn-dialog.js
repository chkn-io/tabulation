var counter = 0; var cur_dialog_array = new Array(); var cur_dialog = ''; (function($){$.fn.chkn_dialog = function(prop){var dialog = this; var dialog_id = dialog.selector; var size = prop.size; counter = counter + 1; cur_dialog_array[counter] = dialog_id; cur_dialog = cur_dialog_array[counter]; if(size == "small"){var modal_height = "auto"; var modal_width = 300; var modal_margin= "40%"; } if(size == "medium"){var modal_height = "auto"; var modal_width = 500; var modal_margin= "33%"; } if(size == "large"){var modal_height = "auto"; var modal_width = 900; var modal_margin= "18%"; } if(counter == 0){d_array = new Array(); } var options = $.extend({height : modal_height, width : modal_width, title:prop.title, description: prop.content, top: "10%", left: modal_margin },prop); function add_styles(){$(dialog_id+' .chkn_modal_box').css({'left':options.left, 'top':options.top, 'height': options.height + 'px', 'width': options.width + 'px', 'border-radius': 5, 'overflow':''}); $(dialog_id + ' .chkn_block_page').css({'background-color':'rgba(0,0,0,0.4)'}); } function add_block_page(){var block_page = $('<div class="chkn_dialog"><div class="chkn_block_page"></div></div>'); $(block_page).appendTo(dialog_id); } function add_popup_box(){var pop_up = $('<div class="chkn_modal_box"><div class="chkn_inner_modal_box" ><div class='+prop.type+'><h2>' + options.title + '</h2> <a href="#" class="chkn_modal_close"><i class="fa fa-remove"></i></a></div><div class="chkn_modal_content">' + options.description + '</div><div class="chkn_modal_button_container"></div></div></div>'); $(pop_up).appendTo(dialog_id +' .chkn_block_page'); $(dialog_id+' .chkn_modal_close').click(function(e){e.preventDefault(); $(this).parent().fadeOut().remove(); $(dialog_id+' .chkn_block_page').fadeOut().remove(); counter = counter - 1; cur_dialog = cur_dialog_array[counter]; return false; }); } function add_buttons(){if(prop.buttons != undefined){var buttons_count=0; var dialog_button = ''; $.each(prop.buttons, function(){buttons_count++; }); $.each(prop.buttons, function(key,value){if(buttons_count > 1){var dialog_button = $('<button class="chkn_modal_button_2">'+key+'</button>'); $(dialog_button).appendTo(dialog_id+" .chkn_modal_button_container"); $(dialog_button).click(value); } else{var dialog_button = $('<button class="chkn_modal_button">'+key+'</button>'); $(dialog_button).appendTo(dialog_id+" .chkn_modal_button_container"); $(dialog_button).click(value); } }); } } add_block_page(); add_popup_box(); add_buttons(); add_styles(); $('.chkn_modal_box').fadeIn(); return this; }; $(document).keyup(function(e) {if (e.keyCode == 27) {counter = counter - 1; cur_dialog = cur_dialog_array[counter+1]; $(cur_dialog+' .chkn_block_page').fadeOut().remove(); } }); })(jQuery);